# ── Hyperliquid Wallet ────────────────────────────────────────────────────────
# This bot trades exclusively on Hyperliquid perpetuals.
#
# Setup:
#   1. Create a dedicated agent sub-wallet on Hyperliquid
#      (Settings → API Wallets → Generate Agent Wallet)
#   2. Fund it with USDC — do NOT use your main wallet private key
#   3. Set trade-only permissions on the agent wallet
#
HYPERLIQUID_WALLET_ADDRESS=0xYourAgentWalletAddressHere
HYPERLIQUID_PRIVATE_KEY=0xYourAgentWalletPrivateKeyHere

# ── Paper vs Live ─────────────────────────────────────────────────────────────
PAPER_TRADING=true          # Always start here. Set false only after paper validation.

# ── Bot Cadence ───────────────────────────────────────────────────────────────
# Realistic 4-year backtest (2022–2025, intrabar SL/TP, fees, slippage, funding):
#   1h  →   7.2% CAGR, 52% DD  — intrabar wicks destroy ATR stops constantly
#   2h  →  11.1% CAGR, 33% DD
#   4h  → 151.9% CAGR, 26% DD  ← BEST: ATR stop (2-4%) clears normal wick noise
#   8h  →  70.0% CAGR, 24% DD  — too few trades, misses valid signals
CHECK_INTERVAL_MINUTES=240  # 4h — backtested optimal

SCORE_HISTORY_WINDOW=5      # Bars of history for Medium + Slope calculation
SLOPE_THRESHOLD=0.5         # Minimum slope magnitude to trigger BUY/SELL
MAX_WEEKLY_TRADES=99        # 99 = no cap. Artificial cap was shown to hurt CAGR.

# ── EMA Trend Filter ──────────────────────────────────────────────────────────
# Filter matrix (4h cadence, 2022–2025 realistic):
#   none     → −7.6% CAGR   — loses money without a filter
#   one_way  →  33.8% CAGR  — skip SELL when price > EMA
#   two_way  → 151.9% CAGR  — skip SELL above EMA AND skip BUY below EMA
#
# EMA period sweep (4h, two_way, 2022–2025):
#   EMA(20)  → 151.9% CAGR  ← BEST — near-term momentum alignment
#   EMA(50)  →  84.9% CAGR
#   EMA(100) →  61.4% CAGR
#   EMA(200) →  38.2% CAGR
EMA_FILTER=two_way
EMA_PERIOD=20               # EMA(20) on 4h ≈ 3.3-day trend filter

# ── Nakshatra Filter ──────────────────────────────────────────────────────────
# Full matrix showed adding Nakshatra blocking HURTS at 4h + EMA two_way:
#   EMA two_way only     → 151.9% CAGR  ← current setting
#   NK + EMA two_way     →  24.4% CAGR  — NK blocks valid EMA-confirmed signals
# Nakshatra multipliers (1.2x / 0.8x) still apply to score weighting internally.
NAKSHATRA_FILTER=false

# ── Risk Parameters ───────────────────────────────────────────────────────────
#
# CAPITAL_PCT: bot fetches your live Hyperliquid balance every 4h cycle:
#   effective_capital = account_balance × CAPITAL_PCT
#   risk_per_trade    = effective_capital × RISK_PER_TRADE_PCT
#
# 0.60 → 40% of balance stays free as liquidation buffer.
# Worst historical drawdown was 26% of effective capital, so:
#   worst-case loss on total balance = 0.26 × 0.60 = 15.6% — clear of liquidation.
#
# CAPITAL_USDT is a static fallback used only if the balance fetch fails.
# Set it to CAPITAL_PCT × your starting balance.
#   $200 wallet → CAPITAL_USDT=120   ($1.20 at risk per trade at 1% risk)
#   $500 wallet → CAPITAL_USDT=300   ($3.00 at risk per trade)
#
CAPITAL_PCT=0.60
CAPITAL_USDT=120            # Fallback — set to CAPITAL_PCT × your wallet balance
RISK_PER_TRADE_PCT=0.01     # 1% risk per trade. Do NOT exceed 2% (ruin risk).
MAX_DRAWDOWN_HALT_PCT=0.10  # Halt if equity drops 10% from peak (enforced each cycle)

# Maximum trade hold duration in bot-check intervals.
# 12 bars × 4h = 48h. Force-closes stale positions if SL/TP not hit.
# Mirrors the backtest MAX_OPEN_BARS=12 that produced optimal results.
MAX_OPEN_BARS=12

RR_RATIO=2.0                # Take-profit = SL distance × 2  (2:1 R/R)
ATR_MULTIPLIER=1.5          # Stop-loss = ATR(14) × 1.5

# ── Leverage ──────────────────────────────────────────────────────────────────
# Dollar risk per trade stays FIXED regardless of leverage.
# Leverage only reduces the margin (collateral) required on Hyperliquid.
#
# At 3x: liquidation is 33% from entry — far outside any ATR stop (~2-4%).
# The bot BLOCKS any trade where liquidation is closer than the stop-loss.
# Recommended: 3x–5x for this system.
LEVERAGE=3

# ── Asset ─────────────────────────────────────────────────────────────────────
ACTIVE_ASSET=BTC            # Must match a key in assets_dna.json

# ── Logging ───────────────────────────────────────────────────────────────────
LOG_LEVEL=INFO              # DEBUG | INFO | WARNING | ERROR
DB_PATH=logs/signals.db

# ── Swiss Ephemeris ───────────────────────────────────────────────────────────
# Download ephemeris files for higher precision (optional — Moshier built-in works):
#   https://www.astro.com/swisseph/ephe/
# Place sepl_18.se1, semo_18.se1, seas_18.se1 in the ./ephe/ folder.
EPHE_PATH=./ephe
