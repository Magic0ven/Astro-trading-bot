# ── Exchange API Keys ─────────────────────────────────────────
# Hyperliquid (Recommended — DEX, no KYC, you hold your funds)
# Use a dedicated agent wallet — never your main wallet private key!
HYPERLIQUID_WALLET_ADDRESS=0xYourWalletAddressHere
HYPERLIQUID_PRIVATE_KEY=0xYourPrivateKeyHere

# Binance (CEX alternative)
BINANCE_API_KEY=your_binance_api_key_here
BINANCE_SECRET=your_binance_secret_here

# Bybit (CEX alternative)
BYBIT_API_KEY=your_bybit_api_key_here
BYBIT_SECRET=your_bybit_secret_here

# ── Exchange Selection ────────────────────────────────────────
EXCHANGE=hyperliquid        # hyperliquid | binance | bybit | okx | bitget
MARKET_TYPE=future          # future | spot (hyperliquid is always futures)
PAPER_TRADING=true          # Set to false for live trading

# ── Bot Behaviour ─────────────────────────────────────────────
# How often the bot wakes up and recalculates the cosmic state.
#
# REALISTIC backtest (4h OHLC candles, intrabar SL/TP, fees, slippage, funding):
#   1h  →  +32%  gain,  7.2% CAGR, 52% worst DD  ← intrabar wicks destroy stops
#   2h  →  +52%  gain, 11.1% CAGR, 33% worst DD
#   4h  → +123%  gain, 22.2% CAGR, 23% worst DD  ← BEST: stops wider than noise
#   8h  →  +70%  gain, 14.2% CAGR, 24% worst DD  ← too few trades, misses signals
#
# Key insight: at 1h cadence, BTC's intrabar wick (0.8–1.2%) is often wider
# than the ATR stop, causing constant premature stop-outs. At 4h the ATR stop
# (2.5–4%) comfortably clears normal candle noise. Switching from naive to
# realistic simulation, 4h is the only cadence that holds up.
CHECK_INTERVAL_MINUTES=240  # 4h candles — best realistic CAGR (38.2%) & balanced DD (27%)

SCORE_HISTORY_WINDOW=5      # Number of past scores to keep for slope calculation
SLOPE_THRESHOLD=0.5         # Minimum slope magnitude to trigger a signal

# Weekly trade cap — set to 99 (no cap) to let signal quality decide.
# Adding a hard cap was found to HURT performance: it blocks signals randomly
# based on the week boundary rather than signal quality, lowering win rate.
# Only reduce this if you want to manually limit trading activity.
MAX_WEEKLY_TRADES=99        # 99 = effectively no cap

# ── EMA Trend Filter ──────────────────────────────────────────────────────────
# Full matrix (2022–2025 realistic 4h):
#   none     → -7.6% CAGR   — DO NOT USE without a filter
#   one_way  → 33.8% CAGR   — skip SELL when price > EMA200
#   two_way  → 38.2% CAGR   — skip SELL above EMA200 AND skip BUY below EMA200
EMA_FILTER=two_way          # RECOMMENDED: aligns every trade with macro trend
# EMA period comparison (4h cadence, 2-way, realistic 2022-2025):
#   EMA(20)  → 151.9% CAGR, 48.9% avg WR  ← BEST — near-term momentum aligned
#   EMA(50)  →  84.9% CAGR, 45.5% avg WR
#   EMA(100) →  61.4% CAGR, 43.7% avg WR
#   EMA(200) →  38.2% CAGR, 41.1% avg WR  ← previous default
#   EMA(350) →  27.6% CAGR, 39.9% avg WR
EMA_PERIOD=20               # EMA(20) on 4h candles ≈ 3.3-day trend filter

# ── Nakshatra Filter ──────────────────────────────────────────────────────────
# Backtest matrix showed Nakshatra blocking HURTS at 4h+EMA2way (38.2% → 24.4%).
# Multipliers still applied internally for score weighting.
# Set to true only if you want to revert to the older conservative approach.
NAKSHATRA_FILTER=false

# ── Risk Parameters ───────────────────────────────────────────
#
# CAPITAL_USDT = position-sizing base, NOT your full deposit.
#
# Set to 60% of your real account balance. The other 40% stays free
# as a liquidation buffer (worst historical DD was 25.9% of CAPITAL_USDT;
# 40% buffer means worst-case loss = 15.5% of total balance).
#
# Scaling examples (% CAGR / DD identical regardless of this value):
#   $1,000 account  ->  CAPITAL_USDT=600    ($6  at risk per trade)
#   $5,000 account  ->  CAPITAL_USDT=3000   ($30 at risk per trade)
#   $10,000 account ->  CAPITAL_USDT=6000   ($60 at risk per trade)
#   $50,000 account ->  CAPITAL_USDT=30000  ($300 at risk per trade)
#
# Idle capital (60-70% of candles have no open trade) can earn
# 4-5% APY in stablecoin yield -- set that up separately on exchange.
#
# CAPITAL_PCT: bot fetches your live balance every cycle and uses:
#   effective_capital = account_balance * CAPITAL_PCT
# Sizes grow as account compounds, shrink after losses -- fully automatic.
# CAPITAL_USDT is a static fallback only (used if balance fetch fails).
#
CAPITAL_PCT=0.60            # 60% of live balance -- auto-scales with compounding
CAPITAL_USDT=120            # Fallback only -- set to CAPITAL_PCT x starting balance
RISK_PER_TRADE_PCT=0.01     # 1% risk per trade -- do NOT exceed 2% (ruin risk)
MAX_DRAWDOWN_HALT_PCT=0.10  # Halt if equity drops 10% from peak (enforced each cycle)
# Maximum trade hold duration in bot-check intervals.
# 12 bars × 4h cadence = 48h. Any open position older than this is force-closed
# at market price, matching the backtest MAX_OPEN_BARS=12 setting that was tested
# across values 6/12/24/48 — 12 bars produced the best CAGR/DD balance.
MAX_OPEN_BARS=12            # 12 × 4h = 48h max hold — mirrors backtest optimal
RR_RATIO=2.0                # Risk:Reward minimum (2:1)
ATR_MULTIPLIER=1.5          # Stop-loss distance = ATR x this

# ── Leverage ───────────────────────────────────────────────────
# Dollar risk per trade stays FIXED regardless of leverage.
# Leverage only reduces required margin (collateral on exchange).
#
# Safety rule: liquidation distance = 1/leverage
#   At 3x leverage: liquidation is 33% away → safe for any ATR stop
#   At 10x leverage: liquidation is 10% away → safe for most ATR stops
#   At 20x leverage: liquidation is 5% away → DANGEROUS if ATR stop < 5%
#
# The bot will BLOCK a trade if liquidation is closer than stop-loss.
# Recommended: 3–5x for this cosmic system.
LEVERAGE=3

# ── Asset to Trade ────────────────────────────────────────────
ACTIVE_ASSET=BTC            # Must match a key in assets_dna.json

# ── Logging ───────────────────────────────────────────────────
LOG_LEVEL=INFO              # DEBUG | INFO | WARNING | ERROR
DB_PATH=logs/signals.db

# ── Swiss Ephemeris ───────────────────────────────────────────
EPHE_PATH=./ephe            # Path to ephemeris data files
